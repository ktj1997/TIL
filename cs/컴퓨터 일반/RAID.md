# RAID (Redundant Array of Independent Disks)
- **여러 개의 디스크를 하나의 논리적 디스크로 묶어, 고용량, 고성능, 가용성을 동시에 확보하기 위한 기술**
- Level에 따라서 가용성, 성능, 비용이 달라진다.

## Parity bit
- 데이터의 오류를 검출하고 복구하기 위해서 추가된 bit
- 2가지 종류가 있다. (홀수, 짝수)
  - 홀수 패리티: 데이터의 1의 개수가 홀수가 되도록 패리티 비트를 설정
  - 짝수 패리티: 데이터의 1의 개수가 짝수가 되도록 패리티 비트를 설정
  - ex) 1011 (홀수 패리티) > 10110
  - ex) 1011 (짝수 패리티) > 10111
- RAID에서는 Parity는 XOR 기반이다.
  - ```text 
      P = D1 ⊕ D2 ⊕ D3
      만약 디스크 하나가 고장나서 그 디스크의 데이터 전체(블록 단위)가 유실되었을 때,
      
      D1 = P ⊕ D2 ⊕ D3  
      D2 = P ⊕ D1 ⊕ D3  
      D3 = P ⊕ D1 ⊕ D2
    ```


# RAID Level

## RAID0
- Striping
- 최소 Disk 2개
- 데이터를 여러 디스크에 나누어 저장
- 데이터를 여러 디스크에 나누어 저장하기 때문에 읽기 / 쓰기 성능이 좋다.
  - 쓰기속도는 빠르지만, 가용성이 낮다. 
  - ex) 하나의 데이터를 저장하는데 1초가 걸리고, 1부터 4까지 저장한다 > 총 1초
- 하나의 디스크가 고장나면 모든 데이터가 손실된다

```text
[Disk1] [Disk2] [Disk3] [Disk4]
  1       2       3       4
  5       6       7       8
  9       10      11      12
```

## RAID1
- Mirroring
- 최소 Disk 1개
- 데이터를 여러 디스크에 동일하게 저장
- 데이터를 여러 디스크에 동일하게 저장하기 때문에 안정성이 높다
  - 저장속도는 느리지만, 가용성이 높고 읽기 성능이 높다.
  - ex) 하나의 데이터를 저장하는데 1초가 걸리고, 1부터 4까지 저장한다 > 총 4초
- 용량 낭비가 크다.
```text
[Disk1] [Disk2] [Disk3] [Disk4]
  1       1       1       1
  2       2       2       2
  3       3       3       3
```

## RAID5
- Striping + Parity
- 최소 Disk 3개
- 데이터를 여러 디스크에 나누어 저장하고, 패리티를 계산하여 저장
- 데이터를 여러 디스크에 나누어 저장하기 때문에 속도가 빠르다
- 하나의 디스크가 고장나도, 패리티를 이용하여 데이터를 복구할 수 있다.
- 가용성은 보통이다. (Disk 한개의 에러까지만 복구 할 수 있다.  (Parity가 하나의 디스크에 저장되기 때문))
```text
[Disk1] [Disk2] [Disk3] [Disk4]
  1       2       3       P1
  4       5       P2      6
  7       P3      8       9
```

## RAID6
- Striping + Parity * 2
- 최소 Disk 4개
- RAID5와 동일하나, 패리티를 2개 저장한다.
- 데이터를 여러 디스크에 나누어 저장하기 때문에 속도가 빠르다
- 하나의 디스크가 고장나도, 패리티를 이용하여 데이터를 복구할 수 있다.

```text
[Disk1] [Disk2] [Disk3] [Disk4]
  1       2       3       P1 P2
  4       5       P3      6  7
  8       P4      9       10 11
```

# Nested RAID

## RAID10
- RAID1 + RAID0
- Mirroring + Striping
- 최소 4개의 디스크가 필요하다.
```text
# RAID0: (DISK1, DISK2), (DISK3, DISK4)
# RAID1: DISK1, DISK2 & DISK3, DISK4
[Disk1] [Disk2] [Disk3] [Disk4]
  1       1       2       2
  3       3       4       4
  5       5       6       6
```

## RAID50
- RAID5 + RAID0

## RAID60
- RAID6 + RAID0