# 정규화 & 반정규화

## 정규화
- 데이터의 논리적인 구조를 결정하는 방법
- 효율적인 데이터처리, 데이터 일관성 보장을 위해 사용되는 방법
- 이상(Anomoly)를 해결하는 방법이다.

### 함수적 종속성(Functional Dependency)
- X->Y라고 표현
- X를 이용하여 Y를 도출 가능하다는 의미

### 1NF
- Column의 값이 Atomic 해야한다.
### 2NF
- 1정규화를 이행한 테이블을 기반으로 한다.
- 모든 Column이 완전 함수 종속을 만족해야 한다. (= 부분종속이 있어서는 안된다.)
- 복합키의 부분집합을 통해서 Column이 도출되어서는 안된다.
- PK를 통해서만 PK이외의 다른 속성들을 도출 할  수 있어야 한다.
### 3NF
- 2정규화를 이행한 테이블을 기반으로 한다.
- 이행적 함수 종속을 제거 해야 한다.
  - A->B, B->C 일때, A->C가 만족해서는 안된다.
- 테이블 분리를 통해 해결 가능하다. 
- [A->B->C] 릴레이션을 아래와 같이 분리한다. 
  - [A -> B] 릴레이션
  - [B -> C] 릴레이션
### BCNF (Boyce-Codd NormalForm)
- 3정규화를 이행한 테이블을 기반으로 한다.
- 모든 결정자가 후보키가 될 수 있어야 한다.
- 테이블 분리를 통해서 해결 가능 

#### 후보키 
- 최소성과 유일성을 만족한다.

#### 슈퍼키
- 유일성을 만족한다.

## 반정규화
**정규화되어있는 Entity,Attribute,RelationShip에 대해서 개발 및 운영의 단순화를 위해서 중복, 통합을 수행**

- 분리된 테이블간의 Join을 줄여, 조회성능을 높이기 위함
- 분리된 테이블을 다시 합치거나, 통계성 Column 추가 등 

## 이상(Anomoly)
- 잘못된 릴레이션 설계로, 중복 및 종속의 발생
- 중복 및 종속으로 인한 조작 시에 데이터 불일치 발생 


### 삽입 이상
- Row 추가시, 불필요한 값이 삽입
- Row 추가시, 함께 삽입될 값이 존재하지 않음

### 갱신 이상
- 데이터 수정시에, 데이터 중복으로 인해 다른 논리적 항목들까지 수정이 필요함
- 일부만 변경이 되어 데이터 일관성이 없어질 수 있음

### 삭제 이상
- 데이터 삭제시에, 관련없는 데이터가 연쇄적으로 삭제