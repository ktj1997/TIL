# MTU (Maximum Transmission Unit)
- 전송가능한 IP Packet의 최대 전송 단위를 의미한다.
- 적당한 크기를 결정하는 것이 중요하다.
  - 너무 크다면, 한번에 전송할 수 없게 되고, Rotuer가 재전송을 요구할 확률이 높아진다.
  - 너무 작다면 대역폭을 효율적으로 이용할 수 없게 되는 것이고, 비효율 적이다.
- 사용자가 설정 가능하다.
  - 보통 1500 
  - 각 장비마다 다를 수 있다. (Router, ISP 마다 다를 수 있다는 것이다.)

## MTU 단편화
- 각 장비의 MTU의 상이함으로 인해서, 단편화가 나타날 수 있다.
  - 현재는 거의 일어나지 않는다.
  - 일어난다면 주로 VPN (IPSec) 때문에 발생한다.
    - 원본 패킷을 암호화하고 VPN Header를 덧붙이기 때문 (원본 패킷의 단편)
- 전송한 패킷을 다시 MTU에 맞게 분할 하는 것을 의미한다.
- 단편화된 패킷의 **재조립은 수신 측 에서 담당한다.**
  - 재조립 또한 일종의 오버헤드기 떄문에, 발생하지 않는 것이 중요하다.
  - PPS를 떨어 뜨리는 것이 네트워크 성능에 중요하다 (가능한 Packet을 조금 보낼 것)

### 예제
```text
MTU   (1500)       (1400)       (1500)
Router: R1 --------> R2 --------> R3

설명: 
    R1에서 출발한 패킷의 사이즈가 1500이다.
    거쳐 지나가는 R2의 MTU는 1400에 불과하기 떄문에, 1500을 모두 받을 수 없다.
    이 떄, R1의 패킷은 2개로 분리가 되고, offset을 통해서 분리된 패킷의 순서를 결정하게 된다.
```

# MSS (Maxmimum Segment Size)
- MSS = MTU - (IP Header + TCP Header)
- TCP의 데이터 단위인 Segment의 최대사이즈를 이야기 하는 것이다.
- 보통 1460 Byte이다. (MTU (1500)) - (IP Header(20) + TCP Header(20)) = 1460
  - IP와 TCP Header는 각각 최소 20Byte씩 사용한다. (즉 최소 40Byte는 먹고 들어간다는 것이다.)
  - MSS의 크기는 IP Header와 TCP Header의 크기가 늘어난다면 당연히 1460 밑으로 떨어질 수 있다.
- MSS를 적게한다면, 대역폭의 효율이 줄어들게 되므로, 적당하게 선택 해야 한다.
- **3Way-handshake 시점에 Client-Server의 MSS가 교환된다.**
  - MSS Size가 교환되지 않으면 Default 값을 사용한다.
    - ipv4: 536B
    - ipv6: 1220B