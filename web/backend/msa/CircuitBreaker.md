# Circuit Breaker
- 장애를 격리하고, 장애의 전파를 막는다.
- 의존하는 타서비스의 장애로부터 서비스를 보호하고, 가용성을 확보 할 수 있다.
  - 의존하고 있는 Service가 Down되었을 때, TimeOut까지 Blocking이 걸리게 될 것이다.
  - Circuit이 Open되어 있다면, 기존의 응답속도를 유지하면서 빠르게 실패 처리를 할 수 있다.

## 오픈소스 라이브러리
- Netflix Hystrix
- Spring Cloud Circuit Breaker
- Resilience4j
  - Sliding-Window: 카운트 기반
  - Open상태로의 변환: 50%의 실패율
  - Open상태 지속: 60초 

## 상태
### [1] Open
- 요청을 차단하는 상태
- 이 상태가 되면, 외부 API로 요청을 전달하지 않고 **바로 실패 처리** 한다.
  - 문제가 있는 서비스로의 지속적인 요청으로 발생할 수 있는 리소스의 낭비를 방지한다.
- **일정 시간이 지나면, Half-Open 상태로 변경된다.**

### [2] Closed
- 정상적인 상태
- 외부로의 API가 정상적으로 전달 된다.
- **일정 기간동안에 일정횟수 이상의 오류가 발생하면 Open 상태로 변경된다.**

### [3] Half-Open
- 서비스 상태를 확인하기 위한 상태이다.
- **이 상태에서 일부요청이 성공한다면, Closed 상태로 전환된다.**
  - **충족하지 못한다면, 다시 Open상태로 변경된다.**