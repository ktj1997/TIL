# 0. Kafka 개념 및 이해

## Kafka란?
- Data in Mintion Platform
  - 움직이는 데이터를 처리하는 플랫폼이다. 
- EventStreaming Platform
  - Event가 발생했을 때 Evnet를 필요로 하는 곳으로 데이터를 전달해준다.

### Event란?
- 비즈니스에서 일어나는 모든 일(데이터) 를 의미한다.
- 비즈니스 영역에서 광범위 하게 발생한다.
- Big Data로 발생한다.
  - 많은 Event가 발생하여 Big Data만큼 되기 때문에, EventStream이라고 한다.

### Kafka의 3가지 특징
#### 1. Event Stream을 안전하게 전송
#### 2. EventStream을 Disk에 저장한다.
#### 3. EventStream을 분석 및 처리

### Kafka 주요 사용 사례

#### 1. Messaging System
#### 2. IOT 디바이스로부터 데이터 수집
#### 3. Application에서 발생하는 Log 수집
#### 4. RealTimeEventStreaming Prodcessing (이상감지 등)
#### 5. DB동기화 (MSA 기반의 분리된 DB 동기화)


## Topic
- Message가 저장되는 저장 장소
- 논리적인 표현 방식이다.
- Producer가 공급하고, Consumer가 소비한다.
  - Producer와 Consumer는 서로를 알지 못한다.
  - Producer와  Consumer는 각자의 속도로 Read와 Write를 수행한다.
- 내부적으로 하나 이상의 Partition으로 구성된다.
`
## Partition
- CommitLog이다.
  - Event들이 추가된다.
  - 추가만 가능하고 변경이 불가능하다.
  - offset이라는 것으로 접근 가능하다.
    - offset은 계속해서 증가한다.
  - Consumer Group끼리는 다른 Offset을 갖는다.`
  - Producer와 Consumer의 Offset 차이를 Comsumer Lag라고 부른다.
- 병렬처리를 위해서 다수의 Partition을 사용한다.
- **Segement**라는 실제 Message가 저장되는 물리 File로 구성된다.
  - 지정된 크기가 커지거나(default 1GB), 오래되면(default 168 시간) 새로운 파일이 생성되고 추가된다.
- partition끼리는 서로 독립적이다.
  - offset 조차도 독립적이다.
- partition에 저장된 파일들은 Immutable하다.