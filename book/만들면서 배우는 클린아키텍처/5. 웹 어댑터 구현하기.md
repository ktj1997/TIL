# 5. 웹 어댑터 구현하기
- 웹 프로그램은 Web Brower를 통해서 상호작용 할 수 있는 UI나 API를 제공한다.
- 웹 어댑터 구현을 통해서 위와같은 기능을 제공한다.

## 의존성 역전
- 웹 어댑터는 **Incoming Adapter**이다.
- 외부로부터 요청을 받아, Application Layer를 호출하는 역할을 한다.
- 보통 IncomingPort의 역할을 할테지만 (HTTP), OutComingPort의 역할도 필요 할 수 있다.(Web Socket, 양방향)
```text
Controller --->    Port    <------     Service
           (호출)            (구현)
```

## 웹 어댑터의 책임
1. HTTP요청을 객체에 매핑
2. 권함 검사 (인증/인가)
3. 입력 유효성 검증
4. 입력을 UseCaseModel로 매핑 (이 과정에서의 Error 또한 유효성 에러이다.)
5. UseCase 호출
6. UseCase의 리턴 값을 HTTP응답 객체에 매핑
7. HTTP응답을 리턴

```text
HTTP와 관련된 것 (뿐만 아니라, 특정 프로토콜과 연관 된 것)은 Applicaiton Layer에 침투해서는 안된다.
```

## 컨트롤러 나누기
- 컨트롤러의 수가 적은 것 보다는, 많은 것이 좋다.
- 컨트롤러의 수가 적다는 것은 필연적으로, 하나의 컨트롤러에 많은 기능을 포함한다는 것이다.
  - 코트가 추가될 때마다 파악하기 힘들다.
  - 테스트코드 작성에 애를 먹을 수 있다.

## 유지보수 가능한 소프트웨어를 만드는데 어떠한 도움이 되는가?
1. WebAdapter의 특정 프로토콜의 로직이 ApplicationLayer에 침투하는 것을 방지 하는 것.
   - 의존성을 격리시켰기 때문에, 쉽게 Adapter의 교체가 가능하다.
2. WebAdatper를 작은 단위로 분리하는 것 (Controller의 수를 많이 생성 + 적은 기능)
  - 유지보수가 용이하며 로직의 파악이 쉽다.
  - 테스트 하기에 용이하다.