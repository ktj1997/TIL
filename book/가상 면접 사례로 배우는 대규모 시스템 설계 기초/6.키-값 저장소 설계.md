# 키-값(Key-Value) 저장소 설계

## Key-Value 저장소란?
- 비관계형(non-relational) 데이터베이스이다.
- 이 저장소에 저장되는 값은 고유식별자를 가져야한다.
  - Key에는 일반 Text 혹은 Hash가 들어간다.
  - Value에는 일반 Text, List, Object 등이 있다.
- Key값은 짧을 수록 성능상 좋다.
- 이러한 Key-Value 쌍(Pair) 관계 때문에 Key-Value 저장소라고 부른다.
- Dynamo, Memcached, Redis 등이 있다.

## CAP정리
- 분산시스템에서 자주 인용되는 개념
- **CAP 세가지의 개념을 모두 만족하는 분산시스템은 설계 불가능 하다는 것이다.**
- 하나의 조건은 희생해야 한다. (두가지만 설계 구현이 가능하다.)
  - CA : 현실 시스템에서 존재하지 않는다.   
  (파티션 감내를 하지 않는다면 분산시스템의 의미가 없다.)
  - CP : 가용성을 희생한다. 
    - 하나의 노드에서 장애가 발생한다면, 나머지 노드들의 쓰기연산 중단 
  - AP : 데이터 일관성을 희생한다.
    - 장애가 복구된 후의 노드는 낡은 데이터를 가지고 있을 것이다.
      (다른 노드들의 쓰기연산을 제한하지 않았기 때문)

### Consistency (데이터 일관성)
분산 시스템에 접속하는 모든 클라이언트는 어떤 노드에 접속했느냐에 관계없이   
일관된 데이터를 얻을 수 있어야 한다.


### Availability (데이터 가용성)
분산 시스템에 접속하는 클라이언트는 일부 노드에 장애가 발생하더라도 항상
응답을 받을 수 있어야 한다.


### Partition Tolerance (파티션 감내)
**파티션: 두 노드 사이에 통신장애가 발생하였음을 의미**   
파티션이 발생하더라도 시스템은 계속해서 동작해야 한다는 의미이다.


### 문제점
실제환경에서 파티션(네트워크 통신 장애)는 피할 수 없다.