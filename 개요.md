# RabbitMQ
- AMQP 프로토콜을 구현한 오픈소스 MessageBroker
- 거의 모든 언어와 클라이언트 지원
- 관리 UI 존재

## MessageBroker
- Producer(송신자)와 Consumer(수신자) 사이의 전달 매게체

## MessageQueue
**어플리케이션 사이의 데이터 교환에 사용**

- Queue에 적재하기 때문에 나중에 처리가능하다.
- Application사이의 결합도를 낮출 수 있다. (어플리케이션 끼리 직접 연결되지 않으므로)
- 일부의 실패가 전체에 영향을 끼치지 않습니다.
- 실패한 경우 재실행이 가능하다.
- 작업이 처리되었다는걸 확인이 가능

## AMQP
**MQ들이 구현하게 되는 표준 프로토콜**
- 이기종 시스템간 종속없이 표준화된 프로토콜로 통신
- Publisher, Broker, Subscriber로 구성된다.
- RabbiMQ, ActiveMQ, Kafka 등이 구현체이다.

## RabbitMQ 동작 개념
![Topic_Exchange-min](https://user-images.githubusercontent.com/57896918/145175897-32b0115c-07c5-493c-9ab8-39e630375c44.png)

- Producer가 발행한 메세지는 Queue에 직접 전달되는 것이 아닌, Exchange에서 먼저 받는다.
- ExchangeType과 Binding규칙에 따라 적절한 Queue에 전달된다.

### Exchange
|타입|설명|특징|
|------|---|---|
|Direct|RoutingKey가 정확하게 일치해야 전송 |Unicast|
|Topic|RoutingKey가 지정한 패턴에 일치해야 전송 |Multicasst|
|Headers|[key:value]로 이루어진 header 값을 기준으로 일치하는 Queue에 전송|Multicast|
|FanOut|해당 Exchange에 등록된 모든 Queue에 메세지 전송|BroadCast|

### VirtualHost
- **하나의 계정은 여러개의 VirtualHost를 가질수 있고, VirtualHost에 속한 Queue에만 접근 가능하다.**
- 같은 RabbitMQ 인스턴스를 사용하는 Application들을 분리할 수 있다. 
- **connections, exchanges, queues, bindings, 유저 접근권한, 정책들을 독자적으로 갖고있는 논리적 그룹이다.**

### Connection
- 물리적인 TCP Connection

### Channel
- 하나의 Connection안에 생성되는 가상의 Connecction
- Consumer의 Process나 Thread는 각자 Channel을 통해 Queue와 연결

