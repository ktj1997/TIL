# 프록시
**연관관계 매핑이 되어있는 객체를 모두 로딩해야 할까?**

## em.find() vs em.getReference()

1. em.find(): 데이터베이스를 통해서 실제 엔티티 객체 조회
2. em.getReference() : 데이터베이스 조회를 미루는 가짜(프록시) 엔티티 조회<br>
실제 사용하는 시점에 영속성컨텍스트에 요청하고 쿼리 가 날라간다.<br>
   (프록시가 진짜 엔티티를 가리키고있다.)
   
***

## 프록시의 특징
1. 프록시 객체는 처음 사용할 때 한번만 초기화 
2. 프록시객체를 통해서 실제 엔티티에 접근하는 것(교체 되는 것이 아니다.)
3. 프록시 != 원본객체(Jpa는 Id를 통해서 동일성을 보장한다.)
4. 객체가 영속상태이면, em.getRefrence()를 사용했을 때 동일한 객체가 반환된다.<br>
   (프록시가 먼저 호출되었으면 그 뒤의 호출도 프록시,  원본객체가 먼저 호출이면 그 다음 호출도 원복객체 )
    
5. 프록시가 영속화 되지 않은상태에서 원본객체에 접근하려하면 LazyInitializationException이 발생  